from typing import Dict, List


FALLACY_TYPES_8 = [
    "appeal_to_authority",
    "appeal_to_majority",
    "appeal_to_nature",
    "appeal_to_tradition",
    "appeal_to_worse_problems",
    "false_dilemma",
    "hasty_generalization",
    "slippery_slope",
]

FALLACY_TYPE_ZH = {
    "appeal_to_authority": "诉诸权威",
    "appeal_to_majority": "诉诸多数（从众）",
    "appeal_to_nature": "诉诸自然",
    "appeal_to_tradition": "诉诸传统",
    "appeal_to_worse_problems": "诉诸更坏问题（Whataboutism）",
    "false_dilemma": "虚假两难",
    "hasty_generalization": "草率概括",
    "slippery_slope": "滑坡谬误",
}

# 每一类提供“策略空间”：StrategyPlanner 会让 LLM 从中挑选并具体化
STRATEGY_TEMPLATES: Dict[str, Dict[str, List[str]]] = {
    "appeal_to_authority": {
        "core": [
            "质疑权威的相关性与代表性（是否该领域专家？是否共识？）",
            "要求提供独立证据/数据/推理链，而不仅是引用权威",
            "指出权威也可能犯错：观点需要可检验的依据",
        ],
        "moves": [
            "澄清：该权威具体的论据是什么？",
            "区分：专家意见 vs 学术共识（是否有综述/指南支持）",
            "反问：如果另一个同领域权威持相反观点，你如何判断？",
        ],
    },
    "appeal_to_majority": {
        "core": [
            "指出流行性不等于正确性（事实与投票无关）",
            "给出历史反例：多数人曾经相信但后来被证伪",
            "要求回到证据与逻辑：为什么这个观点成立？",
        ],
        "moves": [
            "反问：多数人相信的依据是什么？",
            "举反例：某些观点曾很流行但不正确",
            "重构标准：用可验证证据替代民意作为判据",
        ],
    },
    "appeal_to_nature": {
        "core": [
            "拆分“自然/非自然”与“好/坏”的价值判断",
            "指出自然事物也可能有害，非自然也可能更安全",
            "要求因果机制：为什么“自然”会导致“更好/更安全”？",
        ],
        "moves": [
            "澄清：你说的“自然”具体指什么？",
            "反例：天然毒素、天然风险",
            "要求比较：同等条件下的对照数据在哪里？",
        ],
    },
    "appeal_to_tradition": {
        "core": [
            "指出传统延续不等于合理性（历史惯例≠证据）",
            "强调情境变化：过去成立不代表现在仍成立",
            "要求说明传统做法的实际效果/成本收益",
        ],
        "moves": [
            "追问：为什么传统做法更优？有什么证据？",
            "指出变化：环境/技术/人群已经不同",
            "提出替代：在不破坏核心价值下的改良方案",
        ],
    },
    "appeal_to_worse_problems": {
        "core": [
            "指出问题不具备排他性：能同时处理多个问题",
            "把讨论拉回当前议题：先解决正在讨论的问题",
            "承认更坏问题存在，但不等于否定当前问题的重要性",
        ],
        "moves": [
            "识别转移：这在回避当前论点",
            "重设议程：请先回应当前问题的论证",
            "并行框架：我们可以同时关心两者，但现在先谈 A",
        ],
    },
    "false_dilemma": {
        "core": [
            "指出二选一是错误简化，补充被忽略的选项",
            "重构问题空间：把问题拆成多维度权衡",
            "提出第三方案/折中方案，并说明其合理性",
        ],
        "moves": [
            "列举：除了 A/B 还有哪些可行路径？",
            "拆分：把“价值目标”和“实现手段”分开谈",
            "要求证明：为什么只能二选一？",
        ],
    },
    "hasty_generalization": {
        "core": [
            "质疑样本量与代表性：个例不能推出普遍规律",
            "要求统计或系统性证据：数据、研究、抽样方法",
            "提供反例或边界条件，限制结论范围",
        ],
        "moves": [
            "追问：你基于多少样本？是否有偏差？",
            "反例：存在相反例子说明不能泛化",
            "弱化结论：把“必然/所有”改为“可能/部分”，更严谨",
        ],
    },
    "slippery_slope": {
        "core": [
            "拆解因果链：要求逐步证明每一步必然成立",
            "强调可能性≠必然性：提出阻断条件与制度约束",
            "提出风险管理：即便存在风险，也可通过措施控制",
        ],
        "moves": [
            "逐段追问：A→B 的机制是什么？证据？",
            "指出断点：中间环节并非必然发生",
            "提出措施：如何设置边界避免滑坡",
        ],
    },
}
